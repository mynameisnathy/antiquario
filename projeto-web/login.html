<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Antiquario Temporal - Login e Cadastro</title>
  <style>
    
    @font-face {
      font-family:'Chancery cursive';
      src: url(/chancery_cursive/chancur.ttf);
    }

    body {
      font-family:'Chancery cursive';
      background-color: #2d180f6b;
      margin: 0;
      padding: 0;
      background-image: url('/fundo 50s.jpeg');
      background-size: cover;
      background-attachment: fixed;
      min-height: 100vh;
      color: #493a33;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px 10px;
      user-select: none;
    }

    header {
      color: #a18e66;
      font-size: 2.2rem;
      letter-spacing: 2px;
      text-shadow: #2c1400 1px 3px 5px;
      margin-bottom: 20px;
      text-align: center;
    }

    .tabs {
      display: flex;
      gap: 28px;
      margin-bottom: 30px;
      justify-content: center;
      user-select: none;
    }

    .tab {
      padding: 10px 24px;
      font-weight: bold;
      font-size: 1.2rem;
      color: #8b6b54;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: color 0.3s, border-color 0.3s;
    }

    .tab.active {
      color: #5b3e14;
      border-color: #634b13;
      text-shadow: 1px 1px 4px #8b755a;
    }

    .form-container {
      background-color: #2d180f6b;
      border: 1px solid #bfa76f;
      box-shadow: 0 4px 18px rgba(75, 46, 19, 0.4);
      padding: 28px 32px;
      width: 360px;
      border-radius: 6px;
      transition: box-shadow 0.3s ease;
    }

    .form-container:hover {
      box-shadow: 0 8px 32px #52331580;
      transform: scale(1.03);
    }

    form {
      display: none;
      flex-direction: column;
    }

    form.active {
      display: flex;
    }

    form h2 {
      color: #bcab91;
      margin-bottom: 20px;
      text-align: center;
      text-shadow: 1px 1px 4px #7c5e3a;
    }

    label {
      font-size: 1rem;
      margin-bottom: 6px;
      color: #e1c9b8;
      font-weight: bold;
    }

    input[type="text"],
    input[type="email"],
    input[type="password"] {
      padding: 10px 12px;
      font-size: 1rem;
      border: 1px solid #bfa76f;
      border-radius: 4px;
      margin-bottom: 18px;
      background-color: #3d260c1a;
      color: #f5e6c8;
      transition: border-color 0.3s ease;
    }

    input[type="text"]:focus,
    input[type="email"]:focus,
    input[type="password"]:focus {
      outline: none;
      border-color: #97613f;
      background-color: #52331540;
    }

    button {
      font-family:'Chancery cursive';
      background: linear-gradient(90deg, #97613fad 40%, #5b2e0c 100%);
      color: #e1bf9f;
      border: none;
      border-radius: 5px;
      padding: 12px 0;
      font-size: 1.1rem;
      cursor: pointer;
      box-shadow: 0 2px 8px #5a200f55;
      transition: background 0.2s, transform 0.2s;
      user-select: none;
    }

    button:hover {
      background: linear-gradient(90deg, #5b2e0c 40%, #97613fad 100%);
      transform: scale(1.07);
    }

    #message {
      text-align: center;
      margin-top: 10px;
      font-weight: bold;
      min-height: 24px;
    }

#loading-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; /* full viewport width */
  height: 100vh; /* full viewport height */
  background-color: #2d180fa2; /* semi-transparente */
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

#loading-overlay img {
  width: 100vw;  /* largura da tela toda */
  height: 100vh; /* altura da tela toda */
  object-fit: cover; /* mantém proporção e cobre toda área */
}


    /* Ajuste da imagem do relógio e animação */
    .header-img-link img {
      width: 200px;
      height: auto;
      transition: transform 0.6s ease;
      transform-origin: center center;
      display: block;
    }

    /* Classe que gira a imagem */
    .header-img-link.rotate img {
      transform: rotate(360deg);
    }

    @media (max-width: 400px) {
      .form-container {
        width: 90vw;
        padding: 20px 16px;
      }
    }
  </style>
</head>

<body>

  <div id="loading-overlay" style="display:none;">
    <img src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExNDB2YmdtZnI3bnp0YmhpNDQ2ZHJmODN3dHczemNkeHdrMDhta3J5cSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/OVlFjmEDhx9rG/giphy.gif" alt="Carregando..." />
  </div>

  <header> <a class="header-img-link">
      <img src="/projeto-web/pngtree-old-fashioned-pocket-watch-design-png-image_15270603.png" alt="Logo"/>
    </a></header>

  <div class="tabs">
    <div class="tab active" id="tab-login">Login</div>
    <div class="tab" id="tab-cadastro">Cadastro</div>
  </div>

  <div class="form-container">
    <form id="form-login" class="active" autocomplete="off">
      <h2>Login</h2>

      <label for="login-email">E-mail</label>
      <input type="email" id="login-email" name="login-email" placeholder="seu@email.com" required />

      <label for="login-password">Senha</label>
      <input type="password" id="login-password" name="login-password" placeholder="********" required />

      <button type="submit">Entrar</button>
      <div id="message"></div>
    </form>

    <form id="form-cadastro" autocomplete="off">
      <h2>Cadastro</h2>
      <label for="signup-name">Nome Completo</label>
      <input type="text" id="signup-name" name="signup-name" placeholder="Seu nome" required />

      <label for="signup-email">E-mail</label>
      <input type="email" id="signup-email" name="signup-email" placeholder="seu@email.com" required />

      <label for="signup-password">Senha</label>
      <input type="password" id="signup-password" name="signup-password" placeholder="********" required />

      <label for="signup-password-confirm">Confirmar Senha</label>
      <input type="password" id="signup-password-confirm" name="signup-password-confirm" placeholder="********" required />

      <button type="submit">Cadastrar</button>
      <div id="message-cadastro" style="text-align:center; margin-top: 10px; font-weight: bold; min-height: 24px;"></div>
    </form>
  </div>

  <script>

    const tabLogin = document.getElementById('tab-login');
    const tabCadastro = document.getElementById('tab-cadastro');
    const formLogin = document.getElementById('form-login');
    const formCadastro = document.getElementById('form-cadastro');
    const messageLogin = document.getElementById('message');
    const messageCadastro = document.getElementById('message-cadastro');

    tabLogin.addEventListener('click', () => {
      tabLogin.classList.add('active');
      tabCadastro.classList.remove('active');
      formLogin.classList.add('active');
      formCadastro.classList.remove('active');
      clearMessages();
    });

    tabCadastro.addEventListener('click', () => {
      tabCadastro.classList.add('active');
      tabLogin.classList.remove('active');
      formCadastro.classList.add('active');
      formLogin.classList.remove('active');
      clearMessages();
    });

    function clearMessages() {
      messageLogin.textContent = '';
      messageCadastro.textContent = '';
    }

    // Função para salvar usuário no localStorage
    function salvarUsuario(usuario) {
      localStorage.setItem('usuario', JSON.stringify(usuario));
    }

    // Função para recuperar usuário
    function pegarUsuario() {
      const usuarioJSON = localStorage.getItem('usuario');
      return usuarioJSON ? JSON.parse(usuarioJSON) : null;
    }

    // Cadastro
    formCadastro.addEventListener('submit', (e) => {
      e.preventDefault();

      const nome = document.getElementById('signup-name').value.trim();
      const email = document.getElementById('signup-email').value.trim();
      const senha = document.getElementById('signup-password').value;
      const senhaConfirma = document.getElementById('signup-password-confirm').value;

      if (senha !== senhaConfirma) {
        messageCadastro.style.color = 'red';
        messageCadastro.textContent = "As senhas não coincidem.";
        return;
      }

      if (pegarUsuario() && pegarUsuario().email === email) {
        messageCadastro.style.color = 'red';
        messageCadastro.textContent = "Este e-mail já está cadastrado.";
        return;
      }

      // Salva usuário simples (sem segurança real!)
      salvarUsuario({ nome, email, senha });

      messageCadastro.style.color = 'green';
      messageCadastro.textContent = "Cadastro realizado com sucesso! Agora faça login.";
      formCadastro.reset();

      // Voltar para aba login
      tabLogin.click();
    });

    // Login
    formLogin.addEventListener('submit', (e) => {
      e.preventDefault();

      // Mostrar tela de carregamento
      const loading = document.getElementById('loading-overlay');
      loading.style.display = 'flex';

      const email = document.getElementById('login-email').value.trim();
      const senha = document.getElementById('login-password').value;

      const usuario = pegarUsuario();

      // Simula delay para efeito de carregamento (exemplo 1.5s)
      setTimeout(() => {
        if (!usuario) {
          messageLogin.style.color = 'red';
          messageLogin.textContent = "Nenhum usuário cadastrado. Cadastre-se primeiro.";
          loading.style.display = 'none'; // esconder loading
          return;
        }

        if (email === usuario.email && senha === usuario.senha) {
          // Redirecionar para a tela principal
          window.location.href = 'ablueblue.html';
          // loading some quando a página mudar, não precisa esconder aqui
        } else {
          messageLogin.style.color = 'red';
          messageLogin.textContent = "Usuário ou senha incorretos.";
          loading.style.display = 'none'; // esconder loading
        }
      }, 1500); // 1.5 segundos de delay
    });

        const clockLink = document.querySelector('.header-img-link');
    clockLink.addEventListener('click', function(event) {
      event.preventDefault();
      if (!this.classList.contains('rotate')) {
        this.classList.add('rotate');
        setTimeout(() => this.classList.remove('rotate'), 600);
      }
    });

  </script>

</body>
</html>
